<div class="grid">
  <app-loading [isLoading]="isLoading | async" [isOverlay]="true"></app-loading>
  <p-toast></p-toast>
  <div class="card mb-3" *ngFor="let repo of repositories">
    <div class="row">
      <div class="col-9">
        <h1>{{ repo.subject }}</h1>
        <ng-container
          *ngIf="repo.teachers?.length === 1; else multipleTeachers"
        >
          <p>
            Teacher: {{ repo.teachers[0].name }}
            {{ repo.teachers[0].surname }}
          </p>
        </ng-container>
        <ng-template #multipleTeachers>
          <p>
            Teachers:
            <span *ngFor="let teacher of repo.teachers; let last = last">
              {{ teacher.name }} {{ teacher.surname
              }}<span *ngIf="!last">, </span>
            </span>
          </p>
        </ng-template>
        <p>Number of students: {{ repo.numberOfStudents }}</p>
      </div>
      <div class="col-3">
        <app-button
          *ngIf="user.roleId !== 1"
          label="Join"
          (onClick)="JoinCourse(repo.id, repo.teachers)"
        ></app-button>
        <p class="mt-4">Number of tasks: {{ repo?.numberOfTasks }}</p>
      </div>
    </div>
  </div>
</div>
